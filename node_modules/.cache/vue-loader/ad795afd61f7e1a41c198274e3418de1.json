{"remainingRequest":"E:\\前端\\vue_wzz_music\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\前端\\vue_wzz_music\\src\\components\\findMusic\\singer\\SingerAlbum.vue?vue&type=script&lang=js&","dependencies":[{"path":"E:\\前端\\vue_wzz_music\\src\\components\\findMusic\\singer\\SingerAlbum.vue","mtime":1598424998227},{"path":"E:\\前端\\vue_wzz_music\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\前端\\vue_wzz_music\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"E:\\前端\\vue_wzz_music\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\前端\\vue_wzz_music\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmV4cG9ydCBkZWZhdWx0IHsKICAgIGRhdGEoKSB7CiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgLy/mrYzmiYvkuJPovpHmn6Xor6LmnaHku7YKICAgICAgICAgICAgcXVlcnlJbmZvOiB7CiAgICAgICAgICAgICAgICBpZDogdGhpcy4kcm91dGUucGFyYW1zLmlkLAogICAgICAgICAgICAgICAgbGltaXQ6IDQsCiAgICAgICAgICAgICAgICBvZmZzZXQ6IDAsCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIC8v5b2T5YmN5q2M5omL55qEaWQKICAgICAgICAgICAgc2luZ2VySWQ6IHRoaXMuJHJvdXRlLnBhcmFtcy5pZCwKICAgICAgICAgICAgLy/mrYzmiYvng63pl6g1MOmmlgogICAgICAgICAgICBob3Q1MFNvbmdzOiBbXSwKICAgICAgICAgICAgLy81MOmmlum7mOiupOWxleekujEw6aaWCiAgICAgICAgICAgIGRlZmF1bHRTaG93OiAxMCwKICAgICAgICAgICAgLy/niLbnu4Tku7blvZPliY3mkq3mlL7nmoTpn7PkuZDnmoRpZAogICAgICAgICAgICBjdXJJZDogcGFyc2VJbnQod2luZG93LmxvY2FsU3RvcmFnZS5nZXRJdGVtKCdjdXJQbGF5TXVzaWNJZCcpKSwKICAgICAgICAgICAgLy/lvZPliY3mrYzmiYvng63pl6jkuJPovpHkv6Hmga8o5LiN5YyF5ZCr5LiT6L6R5YaF5ZCr55qE5q2M5puyKQogICAgICAgICAgICBob3RBbGJ1bTogW10sCiAgICAgICAgICAgIC8v5b2T5YmN5q2M5omL5LiT6L6R5YaF5q2M5puy5L+h5oGvCiAgICAgICAgICAgIGFsYnVtTXVzaWNJbmZvOiBbXQogICAgICAgIH0KICAgIH0sCiAgICBjcmVhdGVkKCkgewogICAgICAgIC8v6I635Y+W5q2M5puy54Ot6ZeoNTDpppbmrYwKICAgICAgICB0aGlzLmdldEhvdDUwTXVzaWMoKQogICAgICAgIC8v6I635b6X5q2M5omL55qE54Ot6Zeo5LiT6L6R5L+h5oGvCiAgICAgICAgdGhpcy5nZXRIb3RBbGJ1bSgpCiAgICAgICAgLyoqCiAgICAgICAgICog5rOo5YaM55uR5ZCs55qE5LqL5Lu2IOWcqG1haW4uanPkuK3lrprkuYnkuoYKICAgICAgICAgKiAo55uR5ZCs5b2T5YmN5pKt5pS+6Z+z5LmQ55qEaWTlj5jljJYg5ZON5bqU5byP55qE5YiH5o2i5b2T5YmN5pKt5pS+55qE6Z+z5LmQ55qE5YmN57yA5Zu+5qCHKQogICAgICAgICAqLwogICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdzZXRJdGVtJywgKCk9PiB7CiAgICAgICAgICAgIHRoaXMuY3VySWQgPSBwYXJzZUludChsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnY3VyUGxheU11c2ljSWQnKSkKICAgICAgICB9KQogICAgfSwKICAgIG1ldGhvZHM6IHsKICAgICAgICAvL+iOt+WPluatjOabsueDremXqDUw6aaW5q2MCiAgICAgICAgZ2V0SG90NTBNdXNpYygpIHsKICAgICAgICAgICAgdGhpcy4kaHR0cC5nZXQoJ2FydGlzdC90b3Avc29uZycsIHtwYXJhbXM6IHtpZDogdGhpcy5zaW5nZXJJZH19KS50aGVuKHJlcyA9PiB7CiAgICAgICAgICAgICAgICB0aGlzLmhvdDUwU29uZ3MgPSByZXMuZGF0YS5zb25nczsKICAgICAgICAgICAgICAgIC8v5aSE55CG5pe26ZW/5pWw5o2uCiAgICAgICAgICAgICAgICB0aGlzLmhvdDUwU29uZ3MuZm9yRWFjaChpdGVtID0+IHsKICAgICAgICAgICAgICAgICAgICBjb25zdCBkdCA9IG5ldyBEYXRlKGl0ZW0uZHQpCiAgICAgICAgICAgICAgICAgICAgY29uc3QgbW0gPSAoZHQuZ2V0TWludXRlcygpICsgJycpLnBhZFN0YXJ0KDIsICcwJykKICAgICAgICAgICAgICAgICAgICBjb25zdCBzcyA9IChkdC5nZXRTZWNvbmRzKCkgKyAnJykucGFkU3RhcnQoMiwgJzAnKQoKICAgICAgICAgICAgICAgICAgICBpdGVtLmR0ID0gbW0gKyAnOicgKyBzcwogICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgfSkKICAgICAgICB9LAogICAgICAgIC8v5YiH5o2i5b2T5YmN5pi+56S654Ot6ZeoNTDpppYKICAgICAgICBjaGFuZ2VEZWZhdWx0TnVtKCkgewogICAgICAgICAgICB0aGlzLiQoJy5zaG93JykucmVtb3ZlKCkKICAgICAgICAgICAgdGhpcy5kZWZhdWx0U2hvdyA9IDUwCiAgICAgICAgfSwKICAgICAgICAvL+iOt+WPluatjOaJi+eDremXqOS4k+i+kQogICAgICAgIGdldEhvdEFsYnVtKCkgewogICAgICAgICAgICB0aGlzLiRodHRwLmdldCgnYXJ0aXN0L2FsYnVtJywge3BhcmFtczogdGhpcy5xdWVyeUluZm99KS50aGVuKHJlcyA9PiB7CiAgICAgICAgICAgICAgICB0aGlzLmhvdEFsYnVtID0gcmVzLmRhdGEuaG90QWxidW1zCiAgICAgICAgICAgICAgICB0aGlzLmhvdEFsYnVtLmZvckVhY2goaXRlbSA9PiB7CiAgICAgICAgICAgICAgICAgICAgdGhpcy4kaHR0cC5nZXQoJ2FsYnVtJywge3BhcmFtczoge2lkOiBpdGVtLmlkfX0pLnRoZW4ocmVzID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgLy/lpITnkIbml7bplb8g5YaN5pS+5YWl5pWw5o2uCiAgICAgICAgICAgICAgICAgICAgICAgIHJlcy5kYXRhLnNvbmdzLmZvckVhY2goaXRlbSA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBkdCA9IG5ldyBEYXRlKGl0ZW0uZHQpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBtbSA9IChkdC5nZXRNaW51dGVzKCkgKyAnJykucGFkU3RhcnQoMiwgJzAnKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgc3MgPSAoZHQuZ2V0U2Vjb25kcygpICsgJycpLnBhZFN0YXJ0KDIsICcwJykKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpdGVtLmR0ID0gbW0gKyAnOicgKyBzcwogICAgICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmFsYnVtTXVzaWNJbmZvLnB1c2gocmVzLmRhdGEpCiAgICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAvL+WkhOeQhuaXtumVv+aVsOaNrgogICAgICAgICAgICAgICAgdGhpcy5ob3RBbGJ1bS5mb3JFYWNoKGl0ZW0gPT4gewogICAgICAgICAgICAgICAgICAgIGNvbnN0IGR0ID0gbmV3IERhdGUoaXRlbS5kdCkKICAgICAgICAgICAgICAgICAgICBjb25zdCBtbSA9IChkdC5nZXRNaW51dGVzKCkgKyAnJykucGFkU3RhcnQoMiwgJzAnKQogICAgICAgICAgICAgICAgICAgIGNvbnN0IHNzID0gKGR0LmdldFNlY29uZHMoKSArICcnKS5wYWRTdGFydCgyLCAnMCcpCgogICAgICAgICAgICAgICAgICAgIGl0ZW0uZHQgPSBtbSArICc6JyArIHNzCiAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICB9KQogICAgICAgIH0sCiAgICAgICAgLy/liIbpobXmj5Lku7bpobXmlbDmlLnlj5gKICAgICAgICBoYW5kbGVDdXJyZW50Q2hhbmdlKG5ld1BhZ2UpIHsKICAgICAgICAgICAgdGhpcy5xdWVyeUluZm8ub2Zmc2V0ID0gKG5ld1BhZ2UgLSAxKSAqIHRoaXMucXVlcnlJbmZvLmxpbWl0CiAgICAgICAgICAgIHRoaXMuZ2V0SG90QWxidW0oKTsKICAgICAgICB9LAogICAgICAgIC8v5pKt5pS+54Ot6Zeo5LqU5Y2B6aaWCiAgICAgICAgcGxheUhvdDUwTXVzaWMocm93KSB7CiAgICAgICAgICAgIHZhciBwbGF5TGlzdCA9IFtdCiAgICAgICAgICAgIHRoaXMuaG90NTBTb25ncy5mb3JFYWNoKGl0ZW0gPT4gewogICAgICAgICAgICAgICAgcGxheUxpc3QucHVzaChpdGVtLmlkKQogICAgICAgICAgICB9KQogICAgICAgICAgICB0aGlzLiRlbWl0KCdzZXRTb25nTGlzdEluZm8nLCBwbGF5TGlzdCwgcm93LmlkKQogICAgICAgIH0sCiAgICAgICAgLy/mkq3mlL7kuJPovpHkuK3nmoTmrYzmm7IKICAgICAgICBwbGF5QWxidW1NdXNpYyhyb3cpIHsKICAgICAgICAgICAgdGhpcy4kZW1pdCgnc2V0U29uZ0xpc3RJbmZvJywgd2luZG93LmxvY2FsU3RvcmFnZS5nZXRJdGVtKCdwbGF5TGlzdCcpLCByb3cuaWQpCiAgICAgICAgfQogICAgfQp9Cg=="},{"version":3,"sources":["SingerAlbum.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"SingerAlbum.vue","sourceRoot":"src/components/findMusic/singer","sourcesContent":["<template>\r\n    <div style=\"margin-top: 50px;margin-bottom: 75px;\">\r\n\r\n        <!--默认的头部热门五十首-->\r\n        <el-row>\r\n            <el-col :span=\"4\" :offset=\"2\">\r\n                <el-image src=\"imgs/top50.png\" style=\"width: 150px;height: 150px;\"></el-image>\r\n            </el-col>\r\n\r\n            <el-col :span=\"8\">\r\n                热门50曲\r\n                <el-table :data=\"hot50Songs.slice(0,defaultShow)\" highlight-current-row stripe\r\n                          :show-header=\"false\" @row-dblclick=\"playHot50Music\"\r\n                          style=\"margin-top: 15px;cursor: context-menu;border: 1px solid rgb(230,230,230)\">\r\n\r\n                    <el-table-column label=\"#\" type=\"index\">\r\n                        <template scope=\"scope\">\r\n                            <img v-if=\"curId === scope.row.id\" src=\"imgs/isPlay.png\" alt=\"\">\r\n                            <p v-else>{{scope.$index+1 >= 10 ? scope.$index+1 : ('0'+(scope.$index+1)).toString()}}</p>\r\n                        </template>\r\n                    </el-table-column>\r\n\r\n                    <el-table-column label=\"操作\" width=\"70px;\">\r\n                        <template>\r\n                            <i class=\"el-icon-star-off\" style=\"font-size: 18px;cursor: pointer\"></i>\r\n                            <i class=\"el-icon-download\" style=\"margin-left: 10px;font-size: 18px;cursor:pointer;\"></i>\r\n                        </template>\r\n                    </el-table-column>\r\n\r\n                    <el-table-column v-if=\"false\" label=\"id\" prop=\"id\"></el-table-column>\r\n\r\n                    <el-table-column label=\"音乐标题\" prop=\"name\"></el-table-column>\r\n\r\n                    <el-table-column label=\"时长\" prop=\"dt\" width=\"80px;\"></el-table-column>\r\n\r\n                </el-table>\r\n                <p class=\"show\" style=\"margin-top: 15px;cursor: pointer;\" @click=\"changeDefaultNum\">查看全部50首></p>\r\n            </el-col>\r\n        </el-row>\r\n\r\n        <!--所有专辑信息-->\r\n        <el-row v-for=\"item in albumMusicInfo\" style=\"margin-top: 45px;\">\r\n            <el-col :span=\"4\" :offset=\"2\">\r\n                <el-image :src=\"item.album.picUrl\" style=\"width: 150px;height: 150px;\"></el-image>\r\n                <span style=\"position:absolute;left: 140px;top: 150px;\">{{item.album.publishTime | dateFormatToYMD}}</span>\r\n            </el-col>\r\n\r\n            <el-col :span=\"8\">\r\n                {{item.album.name}}\r\n                <el-table :data=\"item.songs\" highlight-current-row stripe\r\n                          :show-header=\"false\" @row-dblclick=\"playAlbumMusic\"\r\n                          style=\"margin-top: 15px;cursor: context-menu;border: 1px solid rgb(230,230,230)\"\r\n                >\r\n\r\n                    <el-table-column type=\"index\">\r\n                        <template scope=\"scope\">\r\n                            <img v-if=\"curId === scope.row.id\" src=\"imgs/isPlay.png\" alt=\"\">\r\n                            <p v-else>{{scope.$index+1 >= 10 ? scope.$index+1 : ('0'+(scope.$index+1)).toString()}}</p>\r\n                        </template>\r\n                    </el-table-column>\r\n\r\n                    <el-table-column width=\"70px;\">\r\n                        <template>\r\n                            <i class=\"el-icon-star-off\" style=\"font-size: 18px;cursor: pointer\"></i>\r\n                            <i class=\"el-icon-download\" style=\"margin-left: 10px;font-size: 18px;cursor:pointer;\"></i>\r\n                        </template>\r\n                    </el-table-column>\r\n\r\n                    <el-table-column v-if=\"false\" label=\"id\" prop=\"id\"></el-table-column>\r\n\r\n                    <el-table-column prop=\"name\"></el-table-column>\r\n\r\n                    <el-table-column prop=\"dt\" width=\"80px;\"></el-table-column>\r\n\r\n                </el-table>\r\n            </el-col>\r\n        </el-row>\r\n        <!--分页-->\r\n        <el-pagination background\r\n                       layout=\"prev,next\"  :page-size=\"queryInfo.limit\"\r\n                       @current-change=\"handleCurrentChange\">\r\n        </el-pagination>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\n    export default {\r\n        data() {\r\n            return {\r\n                //歌手专辑查询条件\r\n                queryInfo: {\r\n                    id: this.$route.params.id,\r\n                    limit: 4,\r\n                    offset: 0,\r\n                },\r\n                //当前歌手的id\r\n                singerId: this.$route.params.id,\r\n                //歌手热门50首\r\n                hot50Songs: [],\r\n                //50首默认展示10首\r\n                defaultShow: 10,\r\n                //父组件当前播放的音乐的id\r\n                curId: parseInt(window.localStorage.getItem('curPlayMusicId')),\r\n                //当前歌手热门专辑信息(不包含专辑内含的歌曲)\r\n                hotAlbum: [],\r\n                //当前歌手专辑内歌曲信息\r\n                albumMusicInfo: []\r\n            }\r\n        },\r\n        created() {\r\n            //获取歌曲热门50首歌\r\n            this.getHot50Music()\r\n            //获得歌手的热门专辑信息\r\n            this.getHotAlbum()\r\n            /**\r\n             * 注册监听的事件 在main.js中定义了\r\n             * (监听当前播放音乐的id变化 响应式的切换当前播放的音乐的前缀图标)\r\n             */\r\n            window.addEventListener('setItem', ()=> {\r\n                this.curId = parseInt(localStorage.getItem('curPlayMusicId'))\r\n            })\r\n        },\r\n        methods: {\r\n            //获取歌曲热门50首歌\r\n            getHot50Music() {\r\n                this.$http.get('artist/top/song', {params: {id: this.singerId}}).then(res => {\r\n                    this.hot50Songs = res.data.songs;\r\n                    //处理时长数据\r\n                    this.hot50Songs.forEach(item => {\r\n                        const dt = new Date(item.dt)\r\n                        const mm = (dt.getMinutes() + '').padStart(2, '0')\r\n                        const ss = (dt.getSeconds() + '').padStart(2, '0')\r\n\r\n                        item.dt = mm + ':' + ss\r\n                    })\r\n                })\r\n            },\r\n            //切换当前显示热门50首\r\n            changeDefaultNum() {\r\n                this.$('.show').remove()\r\n                this.defaultShow = 50\r\n            },\r\n            //获取歌手热门专辑\r\n            getHotAlbum() {\r\n                this.$http.get('artist/album', {params: this.queryInfo}).then(res => {\r\n                    this.hotAlbum = res.data.hotAlbums\r\n                    this.hotAlbum.forEach(item => {\r\n                        this.$http.get('album', {params: {id: item.id}}).then(res => {\r\n                            //处理时长 再放入数据\r\n                            res.data.songs.forEach(item => {\r\n                                const dt = new Date(item.dt)\r\n                                const mm = (dt.getMinutes() + '').padStart(2, '0')\r\n                                const ss = (dt.getSeconds() + '').padStart(2, '0')\r\n\r\n                                item.dt = mm + ':' + ss\r\n                            })\r\n                            this.albumMusicInfo.push(res.data)\r\n                        })\r\n                    })\r\n                    //处理时长数据\r\n                    this.hotAlbum.forEach(item => {\r\n                        const dt = new Date(item.dt)\r\n                        const mm = (dt.getMinutes() + '').padStart(2, '0')\r\n                        const ss = (dt.getSeconds() + '').padStart(2, '0')\r\n\r\n                        item.dt = mm + ':' + ss\r\n                    })\r\n                })\r\n            },\r\n            //分页插件页数改变\r\n            handleCurrentChange(newPage) {\r\n                this.queryInfo.offset = (newPage - 1) * this.queryInfo.limit\r\n                this.getHotAlbum();\r\n            },\r\n            //播放热门五十首\r\n            playHot50Music(row) {\r\n                var playList = []\r\n                this.hot50Songs.forEach(item => {\r\n                    playList.push(item.id)\r\n                })\r\n                this.$emit('setSongListInfo', playList, row.id)\r\n            },\r\n            //播放专辑中的歌曲\r\n            playAlbumMusic(row) {\r\n                this.$emit('setSongListInfo', window.localStorage.getItem('playList'), row.id)\r\n            }\r\n        }\r\n    }\r\n</script>\r\n\r\n<style scoped>\r\n\r\n</style>\r\n"]}]}