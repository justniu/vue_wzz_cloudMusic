{"remainingRequest":"E:\\前端\\vue_wzz_music\\node_modules\\babel-loader\\lib\\index.js!E:\\前端\\vue_wzz_music\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!E:\\前端\\vue_wzz_music\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\前端\\vue_wzz_music\\src\\components\\findMusic\\search\\SearchBySong.vue?vue&type=script&lang=js&","dependencies":[{"path":"E:\\前端\\vue_wzz_music\\src\\components\\findMusic\\search\\SearchBySong.vue","mtime":1598424828305},{"path":"E:\\前端\\vue_wzz_music\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\前端\\vue_wzz_music\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"E:\\前端\\vue_wzz_music\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\前端\\vue_wzz_music\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuY29uY2F0IjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZm9yLWVhY2giOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIuZG9tLWNvbGxlY3Rpb25zLmZvci1lYWNoIjsKLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KZXhwb3J0IGRlZmF1bHQgewogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBzZWFyY2hEYXRhOiBkZWNvZGVVUklDb21wb25lbnQodGhpcy4kcm91dGUucGFyYW1zLmRhdGEpLAogICAgICAvL+W9k+WJjeeahOaQnOe0ouadoeS7tgogICAgICBxdWVyeUluZm86IHsKICAgICAgICBrZXl3b3JkczogdGhpcy4kcm91dGUucGFyYW1zLmRhdGEsCiAgICAgICAgbGltaXQ6IDMwLAogICAgICAgIG9mZnNldDogMCwKICAgICAgICB0eXBlOiAxCiAgICAgICAgLyogdHlwZQogICAgICAgICAgICDpu5jorqTkuLoxCiAgICAgICAgICAgIDE6IOWNleabsiAxMDA65q2M5omLIDEwMDA65q2M5Y2VIDEwMTQ66KeG6aKRCiAgICAgICAgKi8KCiAgICAgIH0sCiAgICAgIC8v5p+l6K+i57uT5p6c5oC75pWwCiAgICAgIHNvbmdUb3RhbDogMCwKICAgICAgLy/mrYzmm7LmlbDnmoTnu5Pmnpzpm4YKICAgICAgc29uZ0xpc3Q6IFtdLAogICAgICAvL+eItue7hOS7tuW9k+WJjeaSreaUvueahOmfs+S5kOeahGlkCiAgICAgIGN1cklkOiBwYXJzZUludCh3aW5kb3cubG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2N1clBsYXlNdXNpY0lkJykpCiAgICB9OwogIH0sCiAgY3JlYXRlZDogZnVuY3Rpb24gY3JlYXRlZCgpIHsKICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgLy/ojrflj5bmkJzntKLnu5Pmnpzpm4YKICAgIHRoaXMuZ2V0U2VhcmNoUmVzdWx0KCk7IC8v5rOo5YaM55uR5ZCs55qE5LqL5Lu2IOWcqG1haW4uanPkuK3lrprkuYnkuoYKCiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignc2V0SXRlbScsIGZ1bmN0aW9uICgpIHsKICAgICAgX3RoaXMuY3VySWQgPSBwYXJzZUludChsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnY3VyUGxheU11c2ljSWQnKSk7CiAgICB9KTsKICB9LAogIG1ldGhvZHM6IHsKICAgIGdldFNlYXJjaFJlc3VsdDogZnVuY3Rpb24gZ2V0U2VhcmNoUmVzdWx0KCkgewogICAgICB2YXIgX3RoaXMyID0gdGhpczsKCiAgICAgIHRoaXMuJGh0dHAuZ2V0KCcvc2VhcmNoJywgewogICAgICAgIHBhcmFtczogdGhpcy5xdWVyeUluZm8KICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgX3RoaXMyLnNvbmdMaXN0ID0gcmVzLmRhdGEucmVzdWx0LnNvbmdzOwogICAgICAgIF90aGlzMi5zb25nVG90YWwgPSByZXMuZGF0YS5yZXN1bHQuc29uZ0NvdW50OyAvL+WkhOeQhuaXtumVv2R0CgogICAgICAgIF90aGlzMi5zb25nTGlzdC5mb3JFYWNoKGZ1bmN0aW9uIChpdGVtKSB7CiAgICAgICAgICB2YXIgdGltZSA9IGl0ZW0uZHVyYXRpb24gLyAxMDAwOyAvL+WIhumSnwoKICAgICAgICAgIHZhciBtaW51dGUgPSB0aW1lIC8gNjA7CiAgICAgICAgICB2YXIgbWludXRlcyA9IHBhcnNlSW50KG1pbnV0ZSk7CgogICAgICAgICAgaWYgKG1pbnV0ZXMgPCAxMCkgewogICAgICAgICAgICBtaW51dGVzID0gIjAiICsgbWludXRlczsKICAgICAgICAgIH0gLy/np5IKCgogICAgICAgICAgdmFyIHNlY29uZCA9IHRpbWUgJSA2MDsKICAgICAgICAgIHZhciBzZWNvbmRzID0gTWF0aC5yb3VuZChzZWNvbmQpOwoKICAgICAgICAgIGlmIChzZWNvbmRzIDwgMTApIHsKICAgICAgICAgICAgc2Vjb25kcyA9ICIwIiArIHNlY29uZHM7CiAgICAgICAgICB9CgogICAgICAgICAgaXRlbS5kdXJhdGlvbiA9ICIiLmNvbmNhdChtaW51dGVzLCAiOiIpLmNvbmNhdChzZWNvbmRzKTsKICAgICAgICB9KTsKICAgICAgfSk7CiAgICB9LAogICAgLy/lj4zlh7vmrYzmm7Lmt7vliqDmlbDmja7ov5vljrss5bm25b6q546v5pKt5pS+KOWQkeeItue7hOS7tuS8oOmAkuWPguaVsCkKICAgIHBsYXlNdXNpYzogZnVuY3Rpb24gcGxheU11c2ljKHJvdykgewogICAgICB2YXIgX3RoaXMzID0gdGhpczsKCiAgICAgIHRoaXMuJGh0dHAuZ2V0KCdzb25nL3VybCcsIHsKICAgICAgICBwYXJhbXM6IHsKICAgICAgICAgIGlkOiByb3cuaWQKICAgICAgICB9CiAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgIGlmIChyZXMuZGF0YS5kYXRhWzBdLnVybCAhPT0gJycpIHsKICAgICAgICAgIF90aGlzMy4kaHR0cC5nZXQoJ3NvbmcvZGV0YWlsJywgewogICAgICAgICAgICBwYXJhbXM6IHsKICAgICAgICAgICAgICBpZHM6IHJvdy5pZAogICAgICAgICAgICB9CiAgICAgICAgICB9KS50aGVuKGZ1bmN0aW9uIChyKSB7CiAgICAgICAgICAgIF90aGlzMy4kZW1pdCgnc2V0TXVzaWNVcmwnLCByZXMuZGF0YS5kYXRhWzBdLnVybCwgci5kYXRhLnNvbmdzWzBdKTsKICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9LAogICAgLy/liIbpobXmj5Lku7bpobXmlbDmlLnlj5gKICAgIGhhbmRsZUN1cnJlbnRDaGFuZ2U6IGZ1bmN0aW9uIGhhbmRsZUN1cnJlbnRDaGFuZ2UobmV3UGFnZSkgewogICAgICB0aGlzLnF1ZXJ5SW5mby5vZmZzZXQgPSAobmV3UGFnZSAtIDEpICogdGhpcy5xdWVyeUluZm8ubGltaXQ7CiAgICAgIGlmICh0aGlzLnF1ZXJ5SW5mby5vZmZzZXQgPj0gdGhpcy5zb25nVG90YWwpIHRoaXMucXVlcnlJbmZvLm9mZnNldCA9IHRoaXMuc29uZ1RvdGFsOwogICAgICB0aGlzLmdldFNlYXJjaFJlc3VsdCgpOwogICAgfSwKICAgIC8v6Lez6L2s5q2M5omLCiAgICB0b1NpbmdlclBhZ2U6IGZ1bmN0aW9uIHRvU2luZ2VyUGFnZShpZCkgewogICAgICB0aGlzLiRyb3V0ZXIucHVzaCgnL3Npbmdlci8nICsgaWQpOwogICAgfQogIH0KfTs="},{"version":3,"sources":["SearchBySong.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n    <div style=\"margin-bottom: 75px\">\r\n        <!--歌曲列表-->\r\n        <el-table :data=\"songList\" ref=\"playTable\" highlight-current-row border stripe\r\n                  style=\"cursor: context-menu;\" @row-dblclick=\"playMusic\">\r\n\r\n            <el-table-column label=\"#\" type=\"index\">\r\n                <template scope=\"scope\">\r\n                    <img v-if=\"curId === scope.row.id\" src=\"imgs/isPlay.png\" alt=\"\">\r\n                    <p v-else>{{scope.$index+1}}</p>\r\n                </template>\r\n            </el-table-column>\r\n\r\n\r\n            <el-table-column v-if=\"false\" label=\"id\" prop=\"id\"></el-table-column>\r\n\r\n            <el-table-column label=\"音乐标题\" prop=\"name\"></el-table-column>\r\n\r\n            <el-table-column label=\"歌手\" width=\"80px;\">\r\n                <template scope=\"scope\">\r\n                <span v-for=\"(item,index) in scope.row.artists\" style=\"cursor: pointer\" @click=\"toSingerPage(item.id)\">\r\n                    {{\r\n                    index === 0 && scope.row.artists.length > 1 && index !== scope.row.artists.length-1\r\n                    ? item.name +'/' : item.name\r\n                    }}\r\n                </span>\r\n                </template>\r\n            </el-table-column>\r\n\r\n            <el-table-column label=\"专辑名\" prop=\"album.name\"></el-table-column>\r\n\r\n            <el-table-column label=\"时长\" prop=\"duration\" width=\"80px;\"></el-table-column>\r\n\r\n        </el-table>\r\n        <!--分页-->\r\n        <el-pagination\r\n                layout=\"prev, pager, next\" :page-size=\"queryInfo.limit\"\r\n                :total=\"songTotal\" @current-change=\"handleCurrentChange\">\r\n        </el-pagination>\r\n    </div>\r\n\r\n</template>\r\n\r\n<script>\r\n    export default {\r\n        data() {\r\n            return {\r\n                searchData: decodeURIComponent(this.$route.params.data),\r\n                //当前的搜索条件\r\n                queryInfo: {\r\n                    keywords: this.$route.params.data,\r\n                    limit: 30,\r\n                    offset: 0,\r\n                    type: 1\r\n                    /* type\r\n                        默认为1\r\n                        1: 单曲 100:歌手 1000:歌单 1014:视频\r\n                    */\r\n                },\r\n                //查询结果总数\r\n                songTotal: 0,\r\n                //歌曲数的结果集\r\n                songList: [],\r\n                //父组件当前播放的音乐的id\r\n                curId: parseInt(window.localStorage.getItem('curPlayMusicId')),\r\n            }\r\n        },\r\n        created() {\r\n            //获取搜索结果集\r\n            this.getSearchResult()\r\n            //注册监听的事件 在main.js中定义了\r\n            window.addEventListener('setItem', () => {\r\n                this.curId = parseInt(localStorage.getItem('curPlayMusicId'))\r\n            })\r\n        },\r\n        methods: {\r\n            getSearchResult() {\r\n                this.$http.get('/search', {params: this.queryInfo}).then(res => {\r\n                    this.songList = res.data.result.songs\r\n                    this.songTotal = res.data.result.songCount\r\n                    //处理时长dt\r\n                    this.songList.forEach(item => {\r\n                        var time = item.duration / 1000\r\n                        //分钟\r\n                        var minute = time / 60;\r\n                        var minutes = parseInt(minute);\r\n                        if (minutes < 10) {\r\n                            minutes = \"0\" + minutes;\r\n                        }\r\n                        //秒\r\n                        var second = time % 60;\r\n                        var seconds = Math.round(second);\r\n                        if (seconds < 10) {\r\n                            seconds = \"0\" + seconds;\r\n                        }\r\n                        item.duration = `${minutes}:${seconds}`;\r\n                    })\r\n                })\r\n            },\r\n            //双击歌曲添加数据进去,并循环播放(向父组件传递参数)\r\n            playMusic(row) {\r\n                this.$http.get('song/url', {params: {id: row.id}}).then(res => {\r\n                    if (res.data.data[0].url !== '') {\r\n                        this.$http.get('song/detail', {params: {ids: row.id}}).then(r => {\r\n                            this.$emit('setMusicUrl', res.data.data[0].url, r.data.songs[0])\r\n                        })\r\n                    }\r\n\r\n                })\r\n            },\r\n            //分页插件页数改变\r\n            handleCurrentChange(newPage) {\r\n                this.queryInfo.offset = (newPage - 1) * this.queryInfo.limit\r\n                if (this.queryInfo.offset >= this.songTotal) this.queryInfo.offset = this.songTotal\r\n                this.getSearchResult();\r\n            },\r\n            //跳转歌手\r\n            toSingerPage(id) {\r\n                this.$router.push('/singer/' + id)\r\n            }\r\n        }\r\n    }\r\n</script>\r\n\r\n<style scoped>\r\n\r\n</style>\r\n"],"sourceRoot":"src/components/findMusic/search"}]}